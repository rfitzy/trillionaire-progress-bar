"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const iterablex_1 = require("./iterablex");
const identity_1 = require("../internal/identity");
const _grouping_1 = require("./_grouping");
class GroupedIterable extends iterablex_1.IterableX {
    constructor(key, source) {
        super();
        this.key = key;
        this._source = source;
    }
    [Symbol.iterator]() {
        return this._source[Symbol.iterator]();
    }
}
exports.GroupedIterable = GroupedIterable;
class GroupByIterable extends iterablex_1.IterableX {
    constructor(source, keySelector, elementSelector, resultSelector) {
        super();
        this._source = source;
        this._keySelector = keySelector;
        this._elementSelector = elementSelector;
        this._resultSelector = resultSelector;
    }
    *[Symbol.iterator]() {
        const map = _grouping_1.createGrouping(this._source, this._keySelector, this._elementSelector);
        for (let [key, values] of map) {
            yield this._resultSelector(key, values);
        }
    }
}
exports.GroupByIterable = GroupByIterable;
function groupByResultIdentity(key, values) {
    return new GroupedIterable(key, values);
}
exports.groupByResultIdentity = groupByResultIdentity;
function groupBy(source, keySelector, elementSelector = identity_1.identity, resultSelector = groupByResultIdentity) {
    return new GroupByIterable(source, keySelector, elementSelector, resultSelector);
}
exports.groupBy = groupBy;

//# sourceMappingURL=groupby.js.map
