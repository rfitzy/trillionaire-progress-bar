"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const asyncsink_1 = require("../asyncsink");
const memoize_1 = require("./memoize");
function fromEventPattern(addHandler, removeHandler) {
    const sink = new asyncsink_1.AsyncSink();
    const handler = (e) => sink.write(e);
    addHandler(handler);
    return memoize_1.memoize((async function* () {
        for (let next; !(next = await sink.next()).done;) {
            yield next.value;
        }
        removeHandler(handler);
        sink.end();
    })());
}
exports.fromEventPattern = fromEventPattern;

//# sourceMappingURL=fromeventpattern.js.map
