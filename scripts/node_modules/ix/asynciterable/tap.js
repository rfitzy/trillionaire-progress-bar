"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const toobserver_1 = require("../internal/toobserver");
const asynciterablex_1 = require("./asynciterablex");
class TapAsyncIterable extends asynciterablex_1.AsyncIterableX {
    constructor(source, observer) {
        super();
        this._source = source;
        this._observer = observer;
    }
    async *[Symbol.asyncIterator]() {
        const it = this._source[Symbol.asyncIterator]();
        while (1) {
            let next;
            try {
                next = await it.next();
            }
            catch (e) {
                if (this._observer.error) {
                    await this._observer.error(e);
                }
                throw e;
            }
            if (next.done) {
                if (this._observer.complete) {
                    await this._observer.complete();
                }
                break;
            }
            if (this._observer.next) {
                await this._observer.next(next.value);
            }
            yield next.value;
        }
    }
}
exports.TapAsyncIterable = TapAsyncIterable;
function tap(source, observerOrNext, error, complete) {
    return new TapAsyncIterable(source, toobserver_1.toObserver(observerOrNext, error, complete));
}
exports.tap = tap;

//# sourceMappingURL=tap.js.map
