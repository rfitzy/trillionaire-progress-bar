import { AsyncSink } from '../asyncsink';
import { memoize } from './memoize';
export function fromEventPattern(addHandler, removeHandler) {
    const sink = new AsyncSink();
    const handler = (e) => sink.write(e);
    addHandler(handler);
    return memoize((async function* () {
        for (let next; !(next = await sink.next()).done;) {
            yield next.value;
        }
        removeHandler(handler);
        sink.end();
    })());
}

//# sourceMappingURL=fromeventpattern.mjs.map
